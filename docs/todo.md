# TODO リスト

## 実装済み機能 ✅

### キーボードショートカット機能
- [x] 矢印なし直線作成 (`C`キー)
- [x] 基本付箋作成 (`N`キー)
- [x] クリップボード付箋作成 (`W`キー)
- [x] 最前面移動 (`Cmd/Ctrl + M`)
- [x] 最背面移動 (`Cmd/Ctrl + B`)

### 付箋機能
- [x] 基本付箋（黄色背景）
- [x] リンク付箋（ファイルパス対応）
- [x] Pythonファイル用プレフィックス (`cmd python`)
- [x] Shell/Batchファイル用プレフィックス (`cmd`)
- [x] マウス位置を基準とした付箋作成
- [x] 座標変換（ビューポート⇔シーン）

### ファイル操作機能
- [x] URLパラメータによるファイル指定
- [x] ローカルファイル読み込み
- [x] 自動保存機能（オブジェクト変更時のみ）
- [x] 標準Excalidrawファイル形式での保存
- [x] VSCodeのExcalidraw拡張との互換性
- [x] 外部編集対応（5秒間隔での監視）
- [x] ファイル更新時の自動リロード

### バックアップ機能
- [x] 自動バックアップ作成
- [x] 5分間隔制限
- [x] バックアップローテーション（最大10個）
- [x] `backup/`フォルダでの整理保存
- [x] ファイル命名規則 (`{name}_backup_{00-09}.excalidraw`)
- [x] 古いバックアップの自動上書き

### ドラッグ&ドロップ機能
- [x] ファイルドロップ対応
- [x] 画像ファイルのドロップ（自動リサイズ）
- [x] メールファイルのドロップ（.eml, .msg）
- [x] フォルダドロップ（ショートカット作成）
- [x] Outlookメール直接ドロップ対応
- [x] 複数ファイルの同時処理
- [x] フルパスリンク機能
- [x] 座標変換システム（ドロップ位置の正確な計算）
- [x] アップロード先ディレクトリの自動選択
- [x] ファイル種別による適切な処理分岐

### メール付箋機能
- [x] メールファイル形式の対応（.eml, .msg）
- [x] Outlookメール直接ドロップ対応
- [x] メール内容の解析（件名抽出）
- [x] メール専用付箋（青色背景）
- [x] メールデータの.emlファイル保存

### バックエンドAPI
- [x] FastAPI実装
- [x] `/api/load-file` エンドポイント
- [x] `/api/save-file` エンドポイント
- [x] `/api/file-info` エンドポイント
- [x] `/api/upload-files` エンドポイント（ドラッグ&ドロップ用）
- [x] `/api/create-folder-shortcut` エンドポイント
- [x] `/api/save-email` エンドポイント
- [x] `/api/file/{file_path:path}` エンドポイント（ファイル配信）
- [x] CORS設定
- [x] エラーハンドリング
- [x] セキュリティ対策（ディレクトリトラバーサル防止）

### インフラ・設定
- [x] React + TypeScript + Vite環境
- [x] 適切なプロジェクト構成
- [x] 型定義の整備
- [x] カスタムフックの分離

### ドキュメント
- [x] README.md
- [x] 要件定義書
- [x] 機能仕様書
- [x] バックエンドAPI仕様

## 実装予定機能 📋

### Phase 2: UI/UX改善（高優先度）
- [ ] バックアップファイルの復元UI
  - [ ] バックアップファイル一覧表示
  - [ ] 復元機能の実装
  - [ ] 復元時の確認ダイアログ
- [ ] カスタムショートカットの設定UI
  - [ ] 設定画面の作成
  - [ ] キーバインドの変更機能
  - [ ] 設定の永続化
- [ ] 付箋テンプレート機能
  - [ ] テンプレート作成UI
  - [ ] テンプレート選択機能
  - [ ] カスタムテンプレート保存

### Phase 3: 高度な機能（中優先度）
- [ ] 画像処理機能の拡張
  - [ ] 画像編集機能（回転、フィルタ等）
  - [ ] 画像圧縮オプション
  - [ ] SVG対応の強化
- [ ] ファイル管理機能
  - [ ] アップロードファイルの一覧表示
  - [ ] ファイルの削除・移動機能
  - [ ] ファイル検索機能

### Phase 4: パフォーマンス最適化（中優先度）
- [ ] 大容量ファイル対応
  - [ ] 遅延読み込み
  - [ ] 分割読み込み
  - [ ] メモリ使用量最適化
- [ ] 高速化
  - [ ] 変更検知の最適化
  - [ ] 描画パフォーマンス向上
  - [ ] バックアップ処理の非同期化

## バグ修正・改善 🐛

### 既知の問題
- [ ] 大容量ファイル（10MB以上）での動作が不安定
- [ ] 長時間使用時のメモリリーク調査
- [ ] 複数ファイル同時編集時の競合処理

### 改善項目
- [ ] エラーメッセージの日本語化
- [ ] ログ出力の改善
- [ ] 設定ファイルの外部化
- [ ] 単体テストの追加
- [ ] 統合テストの追加

## 技術的負債 🔧

### コード品質
- [ ] TypeScriptの型定義強化
- [ ] コンポーネントの分離
- [ ] カスタムフックの拡張
- [ ] エラーハンドリングの統一

### セキュリティ
- [ ] ファイルアクセス権限の厳格化
- [ ] 入力値検証の強化
- [ ] セキュリティヘッダーの追加

### 運用性
- [ ] ログ機能の強化
- [ ] 監視機能の追加
- [ ] 設定管理の改善

## 調査・検討項目 🔍

### 技術調査
- [ ] Excalidrawの最新版対応調査
- [ ] React 19の新機能活用検討
- [ ] WebAssembly活用の可能性調査
- [ ] PWA化の検討

### 機能検討
- [ ] オフライン対応の検討
- [ ] モバイル対応の検討
- [ ] 多言語対応の検討
- [ ] アクセシビリティ対応の検討

## 完了基準

### Phase 2完了基準
- [ ] 全ての復元UI機能が動作する
- [ ] カスタムショートカット設定が正常に動作する
- [ ] 付箋テンプレート機能が正常に動作する
- [ ] パフォーマンステストをクリアする

### Phase 3完了基準
- [ ] 画像処理機能の拡張が正常に動作する
- [ ] ファイル管理機能が正常に動作する
- [ ] 統合テストをクリアする

### Phase 4完了基準
- [ ] 大容量ファイル（50MB以上）でも安定動作する
- [ ] 応答時間が要件を満たす
- [ ] メモリ使用量が適切な範囲内に収まる
- [ ] 長時間使用時の安定性が確保される

## 優先度

### 高優先度 (High)
- バックアップファイルの復元UI
- 既知のバグ修正
- セキュリティ強化

### 中優先度 (Medium)
- カスタムショートカット設定UI
- 付箋テンプレート機能
- パフォーマンス最適化

### 低優先度 (Low)
- PWA化
- 多言語対応
- アクセシビリティ対応

## 備考

- このTODOリストは定期的に更新されます
- 新しい要件や課題が発見された場合は適宜追加されます
- 優先度は開発状況やユーザーフィードバックに応じて変更される可能性があります
- Phase 2の完了後にPhase 3の詳細計画を策定予定